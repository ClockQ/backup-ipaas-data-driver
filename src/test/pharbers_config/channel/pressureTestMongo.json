[
  {
    "name": "kafkaConnectJob",
    "factory": "com.pharbers.ipaas.data.driver.api.factory.PhJobFactory",
    "reference": "com.pharbers.ipaas.data.driver.api.job.PhBaseJob",
    "actions": [
      {
        "name": "SourceFromMongodbPerator",
        "factory": "com.pharbers.ipaas.data.driver.api.factory.PhActionFactory",
        "reference": "com.pharbers.ipaas.kafka.relay.job.PhKafkaTestAction",
        "args": {
          "protocol": "http",
          "ip": "192.168.100.176",
          "port": "8083"
        },
        "opers": [
          {
            "name": "创建SourceConnect",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.SourceFromMongodbOperator",
            "args": {
              "connectClass": "com.pharbers.kafka.connect.mongodb.MongodbSourceConnector",
              "tasksMax": "1",
              "connection": "mongodb://192.168.100.176:27017",
              "database": "kafkaconnect",
              "collection": "aggregate_data_003",
              "filter": "{}"
            }
          },
          {
            "name": "创建SinkConnect",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.Sink2HDFSOperator",
            "args": {
              "tasksMax": "1",
              "hdfsPath": "hdfs://192.168.100.137:9000/logs/testLogs/",
              "connectClass": "io.confluent.connect.hdfs.HdfsSinkConnector"
            }
          },
          {
            "name": "创建monitor",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.MonitorOperator"
          },
          {
            "name": "删除管道",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.DeleteConnectOperator"
          }
        ]
      },
      {
        "name": "groupEmployeesList",
        "reference": "com.pharbers.ipaas.data.driver.api.job.PhBaseAction",
        "factory": "com.pharbers.ipaas.data.driver.api.factory.PhActionFactory",
        "args": {},
        "opers": [
          {
            "name": "readParquet",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.data.driver.operators.ReadParquetTestOperator",
            "args": {
              "path": "SourceFromOSSOperator"
            }
          },
          {
            "name": "group",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.data.driver.operators.GroupOperator",
            "args": {
              "inDFName": "readParquet",
              "groups": "department",
              "aggExprs": "count(department) as count"
            }
          },
          {
            "name": "saveToParquet",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.data.driver.operators.SaveParquetTestOperator",
            "args": {
              "inDFName": "group",
              "path": "SourceFromOSSOperator"
            }
          }
        ]
      },
      {
        "name": "kafkaConnectAction",
        "factory": "com.pharbers.ipaas.data.driver.api.factory.PhActionFactory",
        "reference": "com.pharbers.ipaas.kafka.relay.job.PhKafkaTestAction",
        "args": {
          "protocol": "http",
          "ip": "192.168.100.176",
          "port": "8083"
        },
        "opers": [
          {
            "name": "创建SourceHDFSConnect",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.SourceFromParquetOperator",
            "args": {
              "connectName": "testSourceName",
              "tasksMax": "1",
              "topic": "testTopic",
              "hdfsPath": "SourceFromOSSOperator"
            }
          },
          {
            "name": "创建SinkConnect",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.Sink2ESOperator",
            "args": {
              "tasksMax": "1",
              "esUrl": "http://192.168.100.174:9200"
            }
          },
          {
            "name": "创建monitor",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.MonitorOperator"
          },
          {
            "name": "删除管道",
            "factory": "com.pharbers.ipaas.data.driver.api.factory.PhOperatorFactory",
            "reference": "com.pharbers.ipaas.kafka.relay.operators.DeleteConnectOperator"
          }
        ]
      }
    ]
  }
]